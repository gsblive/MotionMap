#
# MotionMap.config
#
#   Version             Comment
#       3.0             Added debugDeviceMode to all physical device definitions
#       2.0             Added MultiSensor, Thermostat, Scene and Occupation Actions
#       1.0             Support for Motion Sensor, Companion and Load devices
#
# This file defines the behaviors of all the devices in a MotionMap home automation environment.
# MotionMap operates as a plug-in to a Perceptive Indigo server and is dependant on the Insteon protocols and devices.
# Devices described here consist of Dimmers SwitchesOutletsThermostatsand Motion Sensors
#
# === WARNING DO NOT USE COMMAS IN THIS CSV FILE - EVEN IN THE COMMENTS ===
#
# Indigo Classifications of devices
#
#   Controllers – A device that controls another device. Dimmers and motions sensors are good examples of these
#   Responders – A device that is controlled by another device
#
#
# MotionMap device families and their behavioral traits
#
#  MotionSensor – A motion Sensor that will effect a loadDevice
#  MultiSensor – Same as above, but with additional functionality such as Luminance, temperature, and vibration sensor functions
#  LoadDevices – A Switch or Dimmer usually a loadDevice that can potentially command other devices
#  Companions – A switch or Dimmer that is usually not a loadDevice device but endeavors to mimic the state of a loadDevice device (the non-loadDevice switch in a 3 way hallway switch environment)
#  HVAC_Insteon, HVAC_Nest - Thermostats. MotionMap will use input from these devices along with knowledge of motion and temperature sensors (multisensor) to adjust the climate in the house
#  HVAC_Insteon_Companion - A thermostat that is just used for acquiring human input and temperature sensing (no HVAC control on this unit - it will send messages to an assigned thermostat defined above)
#  OccupationAction - An occupation trigger that can be programatically defined. When triggered an indigo action will be launched
#  Scene - A collection of Load devices that will be turned on or off together. Scenes are a redefinition of the groups defined within indigo that make for a more reliable group control
#
#
# Syntax of this file
#
#  This file is parsed by MotionMap.py. It must be saved in CSV format to operate
#
#  Blank lines are skipped and ignored
#  Processing will continue till the end of the file unless stopped by the “-.” directive below
#  Lines that begin with '#' are comment lines and are not parsed
#  Lines that begin with '-' are directive lines that control the parsing flow as follows:
#
#    -d (or -debug) Turn on normal parsing debugging. This will echo minimal information to the indigo log during parsing for progress monitoring
#    -e (or -echo) Echo the following cell to the console during parsing
#    -h (or -header) The following line is a header for device type in cell B
#    -v (or -verbose) Turn on verbose debugging. This will echo detailed progress information to the indigo log during parsing
#    -p (or -pause) Pause Processing (used while debugging the parser and/or this config file)
#    -r (or -resume) Resume Processing  (used while debugging the parser and/or this config file)
#    -s (or -set) Set an environment variable or preference in MotionMap
#    -. Stop Processing  (used while debugging the parser and/or this config file)
#
########################################################

-echo,Parsing MotionMap.config version 1.0

########################################################
#
# Variable Definitions – There are analogs to these entries in MotionMap.plugin.py
#                                    These variable definitions effect the way MotionMap operates
#
# Syntax:
# -set,VariableName,Value
#
#     Variables:
#        gDebugName,Global Debug Logging setting (how verbose do you want the logs)
#
# Note String conversions will occur automatically in MotionMap.plugin.py
#
########################################################

#-set,testDebugMode,0

#Turn on Debug Mode so we get some tracing information
#-d

########################################################
#
# Motion Sensors
#
#   deviceName – The English name of the device
#   maxMovement – How long (in minutes) the sensor is allowed to stay on before forcing it off into unoccupied state
#   minMovement – How long (in minutes) that non motion is required before non occupancy is assumed
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
#   IMPORTANT – Keep Motion sensors above all other devices because the other devices will register with the motion sensors during initialization (one pass)
#
# Note: Motionsensor also maintains an indigo variable 'NameOfMotionsensor.Occupation' that contains the current occupation state
#   ('OccupiedAll','UnoccupiedAll','# Offline #' and '# Bedtime #')
#
########################################################

#-h,MotionSensor
#deviceName,maxMovement,minMovement,debugDeviceMode

########################################################
#
# MultisensorMotion
#
#   deviceName – The English name of the device
#   maxMovement – How long (in minutes) the sensor is allowed to stay on before forcing it off into unoccupied state
#   minMovement – How long (in minutes) that non motion is required before non occupancy is assumed
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
#   IMPORTANT – Keep Multi sensors between motion sensors and all other devices because the other devices will register with the motion sensors during initialization (one pass)
#
# Note: Multisensor also maintains an indigo variable 'NameOfMultisensor.Occupation' that contains the current occupation state
#   ('OccupiedAll','UnoccupiedAll','# Offline #' and '# Bedtime #')
#
# NOTE: To supress LED on Fibaro Multisensor, You just need to change the value for Parameter 80 governing the LED signaling mode from 10 (default) to a 0
#
########################################################

-h,MultisensorMotion
deviceName,maxMovement,minMovement,debugDeviceMode
TopFloorMasterBathMultisensorMotion,60,10,noDebug
BottomFloorMultisensorMotion,60,20,noDebug
BottomFloorStairsMultisensorrMotion,60,5,noDebug
MiddleFloorBathToiletMultisensorMotion,60,10,noDebug
MiddleFloorBathMultisensorMotion,60,10,noDebug
MiddleFloorMultisensorMotion,60,20,noDebug
TopFloorMasterMultisensorMotion,60,10,noDebug
TopFloorStairsMultisensorMotion,60,5,noDebug
TopFloorMasterBathLavMultisensorMotion,60,10,noDebug
TopFloorMasterBathShowerMultisensorMotion,60,10,noDebug
GregsDeskMultisensorMotion,60,10,noDebug

########################################################
#
# MultisensorVibration
#
#   deviceName – The English name of the device
#
########################################################
-h,MultisensorVibration
deviceName,debugDeviceMode
GregsDeskMultisensorVibration,noDebug


########################################################
#
# MultisensorLuminance
#
#   deviceName – The English name of the device
#
########################################################
-h,MultisensorLuminance
deviceName,debugDeviceMode
GregsDeskMultisensorLuminance,noDebug


########################################################
#
# MultisensorHumidity
#
#   deviceName – The English name of the device
#
########################################################
-h,MultisensorHumidity
deviceName,debugDeviceMode
GregsDeskMultisensorHumidity,noDebug


########################################################
#
# MultisensorUltraviolet
#
#   deviceName – The English name of the device
#
########################################################
-h,MultisensorUltraviolet
deviceName,debugDeviceMode
GregsDeskMultisensorUltraviolet,noDebug


########################################################
#
# MultisensorTemperature
#
#   deviceName – The English name of the device
#
########################################################
-h,MultisensorTemperature
deviceName,proirity,debugDeviceMode
TopFloorMasterBathMultisensorTemperature,5,noDebug
BottomFloorMultisensorTemperature,5,noDebug
BottomFloorStairsMultisensorrTemperature,5,noDebug
MiddleFloorBathToiletMultisensorTemperature,5,noDebug
MiddleFloorBathMultisensorTemperature,5,noDebug
MiddleFloorMultisensorTemperature,5,noDebug
TopFloorMasterMultisensorTemperature,5,noDebug
TopFloorStairsMultisensorTemperature,5,noDebug
TopFloorMasterBathLavMultisensorTemperature,5,noDebug
TopFloorMasterBathShowerMultisensorTemperature,5,noDebug
GregsDeskMultisensorTemperature,5,noDebug


########################################################
#
# OccupationGroup – A collection of MMDevices (members) are monitored for Occupation related events that are then relayed to any subscriber
#                   of the OccupationGroup. Devices being monitored include MotionSensors, Multisensors, and other Occupation Groups.
#
#   All occupation Events are relayed/generated, including:
#
#    'OccupiedPartial'      One or more of the members in the group are reporting they are occupied
#    'OccupiedAll'   All of the members in the group are reporting they are occupied
#    'UnoccupiedAll' All of the members in the group are reporting they are unoccupied
#
# Other MotionMap devices can subscribe to an OccupationGroup to be notified of Occupation anywhere and everywhere in the
# House/region/room/area being watched by the members
#
#   deviceName – The name of the OccupationGroup
#	  members - The MotionSensors, Multisensors, and other Occupation Groups that are being monitored for occupation events to be relayed
#   unoccupiedRelayDelayMinutes - When an occupatioin state becomes untrue, delay this long before relaying the new state (this helps reduce
#     unnecessary event oscillation)
#
# Note: OccupationGroup also maintains an indigo variable 'NameOfOccupationGroup.Occupation' that contains the current occupation state
#   ('OccupiedPartial','OccupiedAll','UnoccupiedAll','# Offline #' and '# Bedtime #')
#
########################################################

-h,OccupationGroup
deviceName,members,unoccupiedRelayDelayMinutes,debugDeviceMode
DeskArea,GregsDeskMultisensorMotion,0,noDebug
TopFloor,TopFloorMasterBathMultisensorMotion;TopFloorMasterMultisensorMotion;TopFloorStairsMultisensorMotion;TopFloorMasterBathLavMultisensorMotion;TopFloorMasterBathShowerMultisensorMotion;GregsDeskMultisensorMotion,0,noDebug
MiddleFloor,MiddleFloorBathToiletMultisensorMotion;MiddleFloorBathMultisensorMotion;MiddleFloorMultisensorMotion,0,noDebug
BottomFloor,BottomFloorMultisensorMotion;BottomFloorStairsMultisensorrMotion,0,noDebug
House,TopFloor;MiddleFloor;BottomFloor,120,noDebug

########################################################
#
#    LoadDevices – Usually a Dimmer Switch or Outlet
#
#   deviceName – The English name of the device
#   unoccupationDelay – A delay before turning the device off after an unoccupation event
#   maxOnTime – The maximum of time (in minutes) that this device is allowed to stay on (regardless of motion sensor)
#   daytimeOnLevel – The light level to turn this device during the daytime (0 is OFF 1 is ON for switch, 1-100 is percent for dimmer)
#   nighttimeOnLevel – The light level to turn this device during the daytime (0 is OFF 1 is ON for switch, 1-100 is percent for dimmer)
#	specialFeatures = A list that can contain any or the following string commands
#						flash: flash the device 1 minute prior to turning off;
#						beep: beep the device 1 minute prior to turning off;
#						bedtime: beep the device 1 minute prior to turning off
#   onControllers – these are the controllers (motion sensors) that will turn this device on (and sustain sustain)
#   sustainControllers – these are the controllers (motion sensors) that can keep a device on (sustain only will not turn the device on)
#	maxSequentialErrorsAllowed - (optional, default is 2) the maximum numbers of consecutive errors allowd before marking this device unnresponsive
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
#
########################################################

-h,LoadDevice
deviceName,unoccupationDelay,daytimeOnLevel,nighttimeOnLevel,specialFeatures,onControllers,sustainControllers,maxSequentialErrorsAllowed,debugDeviceMode
BottomFloorStairsLightP,5,100,30,flash,BottomFloorStairsMultisensorrMotion,,2,noDebug
BottomFloorRoomNearDoorP,20,0,30,flash;bedtime,,BottomFloorMultisensorMotion,2,noDebug
BottomFloorBunkLeftLightP,60,0,30,flash;bedtime,,BottomFloorMultisensorMotion,2,noDebug
BottomFloorBunkRIghtLightP,60,0,30,flash;bedtime,,BottomFloorMultisensorMotion,2,noDebug
MiddleFloorBathVanityLightP,20,100,60,flash,MiddleFloorBathMultisensorMotion,,2,noDebug
MiddleFloorBathToiletFanLightP,10,100,60,flash,MiddleFloorBathToiletMultisensorMotion,,2,noDebug
TopFloorStairwellLightP,5,0,60,flash,TopFloorStairsMultisensorMotion,,2,noDebug
TopFloorFoyerLightP,5,0,60,flash,TopFloorStairsMultisensorMotion,,2,noDebug
TopFloorMasterLightsP,60,0,60,flash,,TopFloorMasterBathMultisensorMotion;TopFloorMasterMultisensorMotion;GregsDeskMultisensorMotion,2,noDebug
TopFloorMasterUnderBedOutletTop,60,0,100,flash;bedtime,TopFloorMasterMultisensorMotion,TopFloorMasterBathMultisensorMotion;GregsDeskMultisensorMotion,2,noDebug
TopFloorMasterBathLavLight,10,0,14,flash,,TopFloorMasterBathLavMultisensorMotion,2,noDebug
TopFloorMasterShowerLightP,10,0,100,flash,TopFloorMasterBathShowerMultisensorMotion,TopFloorMasterBathMultisensorMotion;TopFloorMasterMultisensorMotion;TopFloorMasterBathLavMultisensorMotion;GregsDeskMultisensorMotion,2,noDebug
TopFloorMasterBathVanityLightP,10,100,60,flash,,TopFloorMasterBathMultisensorMotion;TopFloorMasterMultisensorMotion,2,noDebug
TopFloorMasterBathLinenP,10,100,60,flash,,TopFloorMasterBathMultisensorMotion;TopFloorMasterMultisensorMotion,2,noDebug
MiddleFloorBackDeckP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorBathShowerFanLightP,30,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorDiningLightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorFamilyMainLightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorFamilySpotlightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorFamilyTVLightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorKitchenCabinetLeftLightSwitchP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorKitchenCabinetLightSwitchRightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorKitchenMainLightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug
MiddleFloorKitchenSinkLightP,120,0,30,flash;bedtime,,MiddleFloorMultisensorMotion,2,noDebug

########################################################
#
#    zLoadDevices – Usually a Dimmer Switch or Outlet (Z-Wave Version)
#
#   deviceName – The English name of the device
#   maxNonMotionTime – The maximum of time (in minutes) that this device is allowed to stay on while receiving no motion events
#   maxOnTime – The maximum of time (in minutes) that this device is allowed to stay on (regardless of motion sensor)
#   daytimeOnLevel – The light level to turn this device during the daytime 0 is off1 is on for switch1-100 is percent for dimmer
#   nighttimeOnLevel – The light level to turn this device during the daytime (0 is off1 is on for switch1-100 is percent for dimmer)
#	specialFeatures = A list that can contain any or the following string commands
#						flash: flash the device 1 minute prior to turning off;
#						beep: beep the device 1 minute prior to turning off;
#						bedtime: beep the device 1 minute prior to turning off
#   onControllers – these are the controllers (motion sensors) that will turn this device on (and sustain sustain)
#   sustainControllers – these are the controllers (motion sensors) that can keep a device on (sustain only will not turn the device on)
#	maxSequentialErrorsAllowed - (optional, default is 2) the maximum numbers of consecutive errors allowed before marking this device unnresponsive
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
#
########################################################

#-h,zLoadDevice
#deviceName,maxNonMotionTime,maxOnTime,daytimeOnLevel,nighttimeOnLevel,specialFeatures,onControllers,sustainControllers,maxSequentialErrorsAllowed,debugDeviceMode
#TestRelay,2,10,100,100,flash,TestMultisensor,TopFloorMasterMultisensorMotion,2,noDebug

########################################################
#
# Companion – Usually a Dimmer or Switch
#
#   deviceName – The English name of the device
#   loadDeviceName -  The LoadDevice for this companion
#	maxSequentialErrorsAllowed - (optional, default is 2) the maximum numbers of consecutive errors allowd before marking this device unnresponsive
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
########################################################

-h,Companion
deviceName,loadDeviceName,maxSequentialErrorsAllowed,debugDeviceMode
BottomFloorRoomLightNearStairs,BottomFloorRoomNearDoorP,2,noDebug
MiddleFloorUpperStairwellLight,TopFloorStairwellLightP,2,noDebug
MiddleFloorLowerStairsLight,BottomFloorStairsLightP,2,noDebug
TopFloorMasterBathVanityLight,TopFloorMasterBathVanityLightP,2,noDebug
TopFloorMasterLights,TopFloorMasterLightsP,2,noDebug
TopFloorFoyerLight,TopFloorFoyerLightP,2,noDebug
TopFloorMasterBathLavLight1,TopFloorMasterBathLavLight,2,noDebug

########################################################
#
# HVAC_Insteon – Thermostat
#
#   deviceName – The English name of the device
#   operationalMode -  HvacAutoMode,HvacHeatMode, or HvacCoolMode
#   onControllers – these are the controllers (motion sensors) that will turn this device on (and sustain sustain)
#   sustainControllers – these are the controllers (motion sensors) that can keep a device on (sustain only will not turn the device on)
#	coolSetpoint - the default cool set point
#	heatSetpoint - the default heat set point
#	updateFrequency - how often do you want the settings to be re-evaluated... in minutes
#	fanOnThreshold - the maximum temperature threshold where the fans will turn on to mix the air
#	maxSequentialErrorsAllowed - (optional, default is 2) the maximum numbers of consecutive errors allowd before marking this device unnresponsive
#	allowAsync - Allow this device to receive async commands (1 or 0)
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
########################################################

-h,HVAC_Insteon
deviceName,operationalMode,onControllers,sustainControllers,coolSetpoint,heatSetpoint,updateFrequency,fanOnThreshold,maxSequentialErrorsAllowed,allowAsync,debugDeviceMode
HVACMiddleFloor,HvacHeatMode,MiddleFloorBathToiletMultisensorMotion;MiddleFloorBathMultisensorMotion;TopFloorStairsMultisensorMotion,TopFloorMasterMultisensorMotion,76,66,15,7,3,1,noDebug

########################################################
#
# HVAC_Nest – Nest Thermostat (Be sure to turn off schedule and away learning on the device - its handled by motionmap now)
#
#   deviceName – The English name of the device
#   operationalMode -  HvacAutoMode,HvacHeatMode, or HvacCoolMode
#   onControllers – these are the controllers (motion sensors) that will turn this device on (and sustain sustain)
#   sustainControllers – these are the controllers (motion sensors) that can keep a device on (sustain only will not turn the device on)
#	coolSetpoint - the default cool set point
#	heatSetpoint - the default heat set point
#	updateFrequency - how often do you want the settings to be re-evaluated... in minutes
#	fanOnThreshold - the maximum temperature threshold where the fans will turn on to mix the air
#	maxSequentialErrorsAllowed - (optional, default is 2) the maximum numbers of consecutive errors allowd before marking this device unnresponsive
#	allowAsync - Allow this device to receive async commands (1 or 0)
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
########################################################

#-h,HVAC_Nest
#deviceName,operationalMode,onControllers,sustainControllers,coolSetpoint,heatSetpoint,updateFrequency,fanOnThreshold,maxSequentialErrorsAllowed,allowAsync,debugDeviceMode

########################################################
#
# HVAC_Insteon_Companion – Thermostat
#
# The Insteon wireless thermostat is typically used for this device, it is battery powered and goes to sleep. This means
#	that we cannot send commands to this thermostat nor can we send update requests. Instead, what we do is watch for commands from this device and
#	use that information to influence the settings of the associated master thermostat (which actually controls the furnace and air conditioner).
#	We do, however get information that is broadcast from this thermostat when something in it changes, we note this information and can provide it to
#	other devices when we are asked for it.
#
#   deviceName – The English name of the device
#   operationalMode -  HvacAutoMode,HvacHeatMode, or HvacCoolMode
#   master – this thermostat's master (all of this thermostat's commands get passed on to the master for action)
#	coolSetpoint - the default cool set point
#   coolInfluence – the amount of influence by percent this thermostat has on the master's cool setting
#	heatSetpoint - the default heat set point
#   heatInfluence – the amount of influence by percent this thermostat has on the master's heat setting
#	occupancySensor - the occupancy sensor governing the motion detection for this thermostat
#	allowAsync - Allow this device to receive async commands (1 or 0)
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
########################################################

-h,HVAC_Insteon_Companion
deviceName,operationalMode,master,coolSetpoint,coolInfluence,heatSetpoint,heatInfluence,occupancySensor,allowAsync,debugDeviceMode
HVACCompanionTopFloor,HvacMonitor,HVACMiddleFloor,76,30,66,30,,0,noDebug
HVACCompanionBottomFloor,HvacMonitor,HVACMiddleFloor,76,30,66,30,,0,noDebug

########################################################
#
# Scene – What devices are associated with a scene,
#
#   deviceName – The English name of the device,
#   aliasedDevice -  The device that this device aliases,
#
########################################################

-h,Scene
deviceName,sceneNumber,members
MasterBathroomAll,9,TopFloorMasterBathToiletFanLightP;TopFloorMasterShowerLightP;TopFloorMasterBathVanityLightP

########################################################
#
# OccupationAction – IndigoActionGroups to execute based on area occupation
#
#   deviceName – The name of the OccupationAction
#   occupationEvent -  'on', 'off', 'OccupiedAll', 'UnoccupiedAll', or 'OccupiedPartial'
#   activateAction – The name of the ActionGroup to perform when this occupation becomes activated
#	  actionController - The Motion/Multisensor or OccupationGroup that can trigger this action
#   debugDeviceMode - Extra debugging messages are logged for all interaction with this device (can be 'noDebug' for silent, anything else for verbose)
#
########################################################

-h,OccupationAction
deviceName,occupationEvent,activateAction,actionController,debugDeviceMode
UpperDoorLockControl,UnoccupiedAll,_Security UpperDoorLock,TopFloor,Debug
LowerDoorLockControl,UnoccupiedAll,_Security LowerDoorLock,House,noDebug
TopFireplaceOffControl,UnoccupiedAll,_MotionMap Top Floor Fireplace Off,House,noDebug
MiddleFireplaceOffControl,UnoccupiedAll,_MotionMap Middle Floor Fireplace Off,House,noDebug
BottomFloorHeatCutoffControlOn,OccupiedPartial,BottomFloorHeatOn,House,noDebug
BottomFloorHeatCutoffControlOff,UnoccupiedAll,BottomFloorHeatOff,House,noDebug
